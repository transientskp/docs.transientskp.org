<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Tutorial Overview &mdash; LOFAR Transients Pipeline 2.0-pre documentation</title>
    
    <link rel="stylesheet" href="../_static/pydoctheme.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '2.0-pre',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="shortcut icon" href="../_static/lofar.ico"/>
    <link rel="top" title="LOFAR Transients Pipeline 2.0-pre documentation" href="../index.html" />
    <link rel="up" title="Getting Started" href="index.html" />
    <link rel="next" title="Site-specific setup guides" href="sites.html" />
    <link rel="prev" title="MongoDB" href="concepts/mongodb.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="sites.html" title="Site-specific setup guides"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="concepts/mongodb.html" title="MongoDB"
             accesskey="P">previous</a> |</li>
        <li><a href="../index.html">LOFAR Transients Pipeline 2.0-pre documentation</a> &raquo;</li>
          <li><a href="index.html" accesskey="U">Getting Started</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="tutorial-overview">
<h1>Tutorial Overview<a class="headerlink" href="#tutorial-overview" title="Permalink to this headline">¶</a></h1>
<p>This page walks you through setting up a complete, stand-alone TraP
environment running on your own system. See also our <a class="reference internal" href="sites.html#sites"><em>site-specific
guides</em></a>.</p>
<div class="section" id="install-the-software">
<h2>Install the software<a class="headerlink" href="#install-the-software" title="Permalink to this headline">¶</a></h2>
<p>First of all, the software should be installed on your system. See <a class="reference internal" href="installation.html#installation"><em>the
installation manual</em></a>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>Issues with the <a class="reference external" href="https://code.google.com/p/casacore/">casacore</a>
installation can occasionally require a per-user fix (placing a small
config file in your home directory). If you see errors along the lines of:</p>
<div class="highlight-python"><div class="highlight"><pre>WARN    MeasTable::Planetary(MeasTable::Types, Double)
(file /build/buildd/casacore-1.7.0/measures/Measures/MeasTable.cc, line 4056)
Cannot find the planetary data for MeasJPL object number 3 at UT day 57023 in
table DE200
</pre></div>
</div>
<p>or:</p>
<div class="highlight-python"><div class="highlight"><pre>SEVERE  gaincal::MeasTable::dUTC(Double) ...
Leap second table TAI_UTC seems out-of-date.
</pre></div>
</div>
<p class="last">Then consult your sysadmin or see <a class="reference internal" href="casacore-measures-data.html#casacore-measures"><em>this note</em></a>.</p>
</div>
</div>
<div class="section" id="create-a-pipeline-project-directory">
<h2>Create a pipeline project directory<a class="headerlink" href="#create-a-pipeline-project-directory" title="Permalink to this headline">¶</a></h2>
<p>First, create a project directory: this will contain your pipeline settings and
job directories. To create a project folder in your current working directory,
type:</p>
<div class="highlight-python"><div class="highlight"><pre>$ tkp-manage.py initproject &lt;projectname&gt;
</pre></div>
</div>
<p>(substituting <tt class="docutils literal"><span class="pre">&lt;projectname&gt;</span></tt> for your chosen directory name).</p>
</div>
<div class="section" id="create-a-database">
<span id="getstart-initdb"></span><h2>Create a database<a class="headerlink" href="#create-a-database" title="Permalink to this headline">¶</a></h2>
<p>The pipeline requires a database for storing data, which needs to be created
manually. The database then needs to be initialised with the TRAP database
schema before it can be used.</p>
<p>Depending on your site configuration, creating a database may require sysadmin
rights. Refer to the relevant documentation for your installed database engine
on creating a database:</p>
<ul class="simple">
<li><a class="reference external" href="https://www.monetdb.org/Documentation/monetdbd">MonetDB online documentation</a></li>
<li><a class="reference external" href="http://www.postgresql.org/docs/9.1/static/app-createdb.html">PostgreSQL online documentation</a></li>
</ul>
</div>
<div class="section" id="initialize-a-database">
<h2>Initialize a database<a class="headerlink" href="#initialize-a-database" title="Permalink to this headline">¶</a></h2>
<p>To initialise a database the TraP manage <tt class="docutils literal"><span class="pre">initdb</span></tt> subcommand can be used.
Set the details of the database you have created in the <tt class="docutils literal"><span class="pre">database</span></tt>
section of your <a class="reference internal" href="../userref/config/pipeline_cfg.html#pipeline-cfg"><em>Project Configuration File</em></a>. These include the host and port number of
the system running the database management system, the name of the database,
and the username and password.
Then, from the project directory, type:</p>
<div class="highlight-python"><div class="highlight"><pre>$ tkp-manage.py initdb
</pre></div>
</div>
</div>
<div class="section" id="resetting-a-trap-database">
<h2>Resetting a TraP database<a class="headerlink" href="#resetting-a-trap-database" title="Permalink to this headline">¶</a></h2>
<p>You may wish to reset a previously used TraP database to an empty state.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">As you might expect, this may incur irreversible data loss. Be careful!</p>
</div>
<dl class="docutils">
<dt><strong>PostgreSQL</strong></dt>
<dd>For PostgreSQL there is the optional <strong>-d</strong> flag for the <tt class="docutils literal"><span class="pre">initdb</span></tt> subcommand,
which removes all content before populating the database.</dd>
<dt><strong>MonetDB</strong></dt>
<dd><p class="first">In the case of MonetDB you need to do this manually. You can do this with the
following commands, where <strong>${dbname}</strong> should be replaced with the database
name:</p>
<div class="highlight-python"><div class="highlight"><pre>monetdb stop ${dbname}
monetdb destroy -f ${dbname}
monetdb create ${dbname}
monetdb start ${dbname}
monetdb release ${dbname}
</pre></div>
</div>
<p>For security reasons you should change the default password:</p>
<div class="last highlight-python"><div class="highlight"><pre>mclient -d ${dbname} -s&quot;ALTER USER \&quot;monetdb\&quot; RENAME TO \&quot;${username}\&quot;;
ALTER USER SET PASSWORD &#39;${password}&#39; USING OLD PASSWORD &#39;monetdb&#39;;&quot;
</pre></div>
</div>
</dd>
</dl>
</div>
<div class="section" id="create-and-configure-a-job">
<h2>Create and configure a job<a class="headerlink" href="#create-and-configure-a-job" title="Permalink to this headline">¶</a></h2>
<p>Your pipeline project directory can contain multiple jobs, each represented by
a subdirectory. Job directories contain a list of files to process, and config
file that can be used to define various properties used during processing.
To initialise a job directory run:</p>
<div class="highlight-python"><div class="highlight"><pre>$ tkp-manage.py initjob &lt;jobname&gt;
</pre></div>
</div>
<p>This will create a job subdirectory within your pipeline directory. This
directory contains three files:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">images_to_process.py</span></tt></dt>
<dd>This is a Python script that is used to generate a list of paths to
images. You will need to adjust this to point to your data files.</dd>
<dt><tt class="docutils literal"><span class="pre">job_params.cfg</span></tt></dt>
<dd>The <a class="reference internal" href="../userref/config/job_params_cfg.html#job-params-cfg"><em>parameters configuration file</em></a> for this job.</dd>
<dt><tt class="docutils literal"><span class="pre">inject.cfg</span></tt></dt>
<dd>Configuration for <a class="reference internal" href="../tools/tkp-inject.html#tkp-inject"><em>image metadata injection</em></a>.</dd>
</dl>
</div>
<div class="section" id="run-the-pipeline">
<h2>Run the pipeline<a class="headerlink" href="#run-the-pipeline" title="Permalink to this headline">¶</a></h2>
<p>To start processing your data run (from your pipeline directory):</p>
<div class="highlight-python"><div class="highlight"><pre>$ tkp-manage.py run &lt;jobname&gt;
</pre></div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../index.html">
              <img class="logo" src="../_static/lofar.png" alt="Logo"/>
            </a></p>
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Tutorial Overview</a><ul>
<li><a class="reference internal" href="#install-the-software">Install the software</a></li>
<li><a class="reference internal" href="#create-a-pipeline-project-directory">Create a pipeline project directory</a></li>
<li><a class="reference internal" href="#create-a-database">Create a database</a></li>
<li><a class="reference internal" href="#initialize-a-database">Initialize a database</a></li>
<li><a class="reference internal" href="#resetting-a-trap-database">Resetting a TraP database</a></li>
<li><a class="reference internal" href="#create-and-configure-a-job">Create and configure a job</a></li>
<li><a class="reference internal" href="#run-the-pipeline">Run the pipeline</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="concepts/mongodb.html"
                        title="previous chapter">MongoDB</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="sites.html"
                        title="next chapter">Site-specific setup guides</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../_sources/getstart/tutorial.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="sites.html" title="Site-specific setup guides"
             >next</a> |</li>
        <li class="right" >
          <a href="concepts/mongodb.html" title="MongoDB"
             >previous</a> |</li>
        <li><a href="../index.html">LOFAR Transients Pipeline 2.0-pre documentation</a> &raquo;</li>
          <li><a href="index.html" >Getting Started</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2006—2014, LOFAR Transients Key Science Project.
    </div>
  </body>
</html>