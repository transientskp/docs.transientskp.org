<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>tkp.quality – Data-quality control &mdash; LOFAR Transients Pipeline 2.1-pre documentation</title>
    
    <link rel="stylesheet" href="../../../_static/pydoctheme.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../../',
        VERSION:     '2.1-pre',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../_static/doctools.js"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="shortcut icon" href="../../../_static/lofar.ico"/>
    <link rel="top" title="LOFAR Transients Pipeline 2.1-pre documentation" href="../../../index.html" />
    <link rel="up" title="TKP Package API Reference" href="../index.html" />
    <link rel="next" title="tkp.sourcefinder – source finding and fitting" href="../sourcefinder/index.html" />
    <link rel="prev" title="tkp.telescope – Telescope specific functionality" href="../telescope.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="../sourcefinder/index.html" title="tkp.sourcefinder – source finding and fitting"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="../telescope.html" title="tkp.telescope – Telescope specific functionality"
             accesskey="P">previous</a> |</li>
        <li><a href="../../../index.html">LOFAR Transients Pipeline 2.1-pre documentation</a> &raquo;</li>
          <li><a href="../../index.html" >Developer&#8217;s Reference Guide</a> &raquo;</li>
          <li><a href="../index.html" accesskey="U">TKP Package API Reference</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="module-tkp.quality">
<span id="tkp-quality-data-quality-control"></span><span id="quality"></span><h1><a class="reference internal" href="#module-tkp.quality" title="tkp.quality: Quality control checks"><tt class="xref py py-mod docutils literal"><span class="pre">tkp.quality</span></tt></a> &#8211; Data-quality control<a class="headerlink" href="#module-tkp.quality" title="Permalink to this headline">¶</a></h1>
<p>Data-quality checking related code.</p>
<p>The quality checks are described in the LOFAR Transients Key Science Project
Quality Control Document V1.1 and on the <a class="reference external" href="http://www.lofar.org/operations/doku.php?id=tkp:qualitycontrol">wiki</a>.</p>
<div class="section" id="module-tkp.quality.restoringbeam">
<span id="tkp-quality-restoringbeam"></span><h2><a class="reference internal" href="#module-tkp.quality.restoringbeam" title="tkp.quality.restoringbeam"><tt class="xref py py-mod docutils literal"><span class="pre">tkp.quality.restoringbeam</span></tt></a><a class="headerlink" href="#module-tkp.quality.restoringbeam" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="tkp.quality.restoringbeam.beam_invalid">
<tt class="descclassname">tkp.quality.restoringbeam.</tt><tt class="descname">beam_invalid</tt><big>(</big><em>semibmaj</em>, <em>semibmin</em>, <em>theta</em>, <em>oversampled_x=30</em>, <em>elliptical_x=2.0</em><big>)</big><a class="reference internal" href="../../../_modules/tkp/quality/restoringbeam.html#beam_invalid"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tkp.quality.restoringbeam.beam_invalid" title="Permalink to this definition">¶</a></dt>
<dd><p>Are the beam shape properties ok?</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>semibmaj/semibmin</strong> &#8211; size of the beam in pixels</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">True/False</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="tkp.quality.restoringbeam.highly_elliptical">
<tt class="descclassname">tkp.quality.restoringbeam.</tt><tt class="descname">highly_elliptical</tt><big>(</big><em>semibmaj</em>, <em>semibmin</em>, <em>x=2.0</em><big>)</big><a class="reference internal" href="../../../_modules/tkp/quality/restoringbeam.html#highly_elliptical"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tkp.quality.restoringbeam.highly_elliptical" title="Permalink to this definition">¶</a></dt>
<dd><p>If the beam is highly elliptical it can cause source association
problems within TraP. Again further testing is required to determine
exactly where the cut needs to be.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>Semibmaj/semibmin</strong> &#8211; describe the beam size in pixels</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">True if the beam is highly elliptical, False otherwise</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="tkp.quality.restoringbeam.infinite">
<tt class="descclassname">tkp.quality.restoringbeam.</tt><tt class="descname">infinite</tt><big>(</big><em>smaj</em>, <em>smin</em>, <em>bpa</em><big>)</big><a class="reference internal" href="../../../_modules/tkp/quality/restoringbeam.html#infinite"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tkp.quality.restoringbeam.infinite" title="Permalink to this definition">¶</a></dt>
<dd><p>If the beam is not correctly fitted by AWimager, one or more parameters
will be recorded as infinite.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>smaj</strong> &#8211; Semi-major axis (arbitrary units)</li>
<li><strong>smin</strong> &#8211; Semi-minor axis</li>
<li><strong>bpa</strong> &#8211; Postion angle</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="tkp.quality.restoringbeam.not_full_fieldofview">
<tt class="descclassname">tkp.quality.restoringbeam.</tt><tt class="descname">not_full_fieldofview</tt><big>(</big><em>nx</em>, <em>ny</em>, <em>cellsize</em>, <em>fov</em><big>)</big><a class="reference internal" href="../../../_modules/tkp/quality/restoringbeam.html#not_full_fieldofview"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tkp.quality.restoringbeam.not_full_fieldofview" title="Permalink to this definition">¶</a></dt>
<dd><p>This has been raised as an interesting test, as if the full field of
view (FOV) has not been imaged we may want to image the full dataset.
The imaged FOV information can be estimated using the number of pixels
and the size of the pixels.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>nx</strong> &#8211; number of pixels in x direction</li>
<li><strong>ny</strong> &#8211; number of pixels in y direction</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">True if the full FOV is imaged, False otherwise</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="tkp.quality.restoringbeam.oversampled">
<tt class="descclassname">tkp.quality.restoringbeam.</tt><tt class="descname">oversampled</tt><big>(</big><em>semibmaj</em>, <em>semibmin</em>, <em>x=30</em><big>)</big><a class="reference internal" href="../../../_modules/tkp/quality/restoringbeam.html#oversampled"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tkp.quality.restoringbeam.oversampled" title="Permalink to this definition">¶</a></dt>
<dd><p>It has been identified that having too many pixels across the restoring
beam can lead to bad images, however further testing is required to
determine the exact number.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>Semibmaj/semibmin</strong> &#8211; describe the beam size in pixels</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">True if beam is oversampled, False otherwise</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="tkp.quality.restoringbeam.undersampled">
<tt class="descclassname">tkp.quality.restoringbeam.</tt><tt class="descname">undersampled</tt><big>(</big><em>semibmaj</em>, <em>semibmin</em><big>)</big><a class="reference internal" href="../../../_modules/tkp/quality/restoringbeam.html#undersampled"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tkp.quality.restoringbeam.undersampled" title="Permalink to this definition">¶</a></dt>
<dd><p>We want more than 2 pixels across the beam major and minor axes.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>Semibmaj/semibmin</strong> &#8211; describe the beam size in pixels</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">True if beam is undersampled, False otherwise</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-tkp.quality.brightsource">
<span id="tkp-quality-brightsource"></span><h2><a class="reference internal" href="#module-tkp.quality.brightsource" title="tkp.quality.brightsource"><tt class="xref py py-mod docutils literal"><span class="pre">tkp.quality.brightsource</span></tt></a><a class="headerlink" href="#module-tkp.quality.brightsource" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="tkp.quality.brightsource.check_for_valid_ephemeris">
<tt class="descclassname">tkp.quality.brightsource.</tt><tt class="descname">check_for_valid_ephemeris</tt><big>(</big><em>measures</em><big>)</big><a class="reference internal" href="../../../_modules/tkp/quality/brightsource.html#check_for_valid_ephemeris"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tkp.quality.brightsource.check_for_valid_ephemeris" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks whether the ephemeris data in use by <tt class="docutils literal"><span class="pre">measures</span></tt> is valid.
<tt class="docutils literal"><span class="pre">measures</span></tt> should already have a valid reference frame.</p>
</dd></dl>

<dl class="function">
<dt id="tkp.quality.brightsource.is_bright_source_near">
<tt class="descclassname">tkp.quality.brightsource.</tt><tt class="descname">is_bright_source_near</tt><big>(</big><em>accessor</em>, <em>distance=20</em><big>)</big><a class="reference internal" href="../../../_modules/tkp/quality/brightsource.html#is_bright_source_near"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tkp.quality.brightsource.is_bright_source_near" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks if there is any of the bright radio sources defined in targets
near the center of the image.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>accessor</strong> &#8211; a TKP accessor</li>
<li><strong>distance</strong> &#8211; maximum allowed distance of a bright source (in degrees)</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">False if not bright source is near, description of source if a
bright source is near</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-tkp.quality.rms">
<span id="tkp-quality-rms"></span><h2><a class="reference internal" href="#module-tkp.quality.rms" title="tkp.quality.rms"><tt class="xref py py-mod docutils literal"><span class="pre">tkp.quality.rms</span></tt></a><a class="headerlink" href="#module-tkp.quality.rms" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="tkp.quality.rms.rms_invalid">
<tt class="descclassname">tkp.quality.rms.</tt><tt class="descname">rms_invalid</tt><big>(</big><em>rms</em>, <em>noise</em>, <em>low_bound=1</em>, <em>high_bound=50</em><big>)</big><a class="reference internal" href="../../../_modules/tkp/quality/rms.html#rms_invalid"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tkp.quality.rms.rms_invalid" title="Permalink to this definition">¶</a></dt>
<dd><p>Is the RMS value of an image outside the plausible range?</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>rms</strong> &#8211; RMS value of an image, can be computed with
tkp.quality.statistics.rms</li>
<li><strong>noise</strong> &#8211; Theoretical noise level of instrument, can be calculated with
tkp.lofar.noise.noise_level</li>
<li><strong>low_bound</strong> &#8211; multiplied with noise to define lower threshold</li>
<li><strong>high_bound</strong> &#8211; multiplied with noise to define upper threshold</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">True/False</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-tkp.quality.statistics">
<span id="tkp-quality-statistics"></span><h2><a class="reference internal" href="#module-tkp.quality.statistics" title="tkp.quality.statistics"><tt class="xref py py-mod docutils literal"><span class="pre">tkp.quality.statistics</span></tt></a><a class="headerlink" href="#module-tkp.quality.statistics" title="Permalink to this headline">¶</a></h2>
<p>functions for calculating statistical properties of LOFAR images</p>
<dl class="function">
<dt id="tkp.quality.statistics.clip">
<tt class="descclassname">tkp.quality.statistics.</tt><tt class="descname">clip</tt><big>(</big><em>data</em>, <em>sigma=3</em><big>)</big><a class="reference internal" href="../../../_modules/tkp/quality/statistics.html#clip"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tkp.quality.statistics.clip" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove all values above a threshold from the array.
Uses iterative clipping at sigma value until nothing more is getting clipped.
:param data: a numpy array</p>
</dd></dl>

<dl class="function">
<dt id="tkp.quality.statistics.rms">
<tt class="descclassname">tkp.quality.statistics.</tt><tt class="descname">rms</tt><big>(</big><em>data</em><big>)</big><a class="reference internal" href="../../../_modules/tkp/quality/statistics.html#rms"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tkp.quality.statistics.rms" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the RMS of the data about the median.
:param data: a numpy array</p>
</dd></dl>

<dl class="function">
<dt id="tkp.quality.statistics.rms_with_clipped_subregion">
<tt class="descclassname">tkp.quality.statistics.</tt><tt class="descname">rms_with_clipped_subregion</tt><big>(</big><em>data</em>, <em>sigma=3</em>, <em>f=4</em><big>)</big><a class="reference internal" href="../../../_modules/tkp/quality/statistics.html#rms_with_clipped_subregion"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tkp.quality.statistics.rms_with_clipped_subregion" title="Permalink to this definition">¶</a></dt>
<dd><p>returns the rms value of a iterative sigma clipped subsection of an image
:param data: A numpy array
:param sigma: sigma value used for clipping
:param f: determines size of subsection, result will be 1/fth of the image size</p>
</dd></dl>

<dl class="function">
<dt id="tkp.quality.statistics.subregion">
<tt class="descclassname">tkp.quality.statistics.</tt><tt class="descname">subregion</tt><big>(</big><em>data</em>, <em>f=4</em><big>)</big><a class="reference internal" href="../../../_modules/tkp/quality/statistics.html#subregion"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tkp.quality.statistics.subregion" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the inner region of a image, according to f.</p>
<p>Resulting area is 4/(f*f) of the original.
:param data: a numpy array</p>
</dd></dl>

</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../../index.html">
              <img class="logo" src="../../../_static/lofar.png" alt="Logo"/>
            </a></p>
  <h3><a href="../../../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#"><tt class="docutils literal"><span class="pre">tkp.quality</span></tt> &#8211; Data-quality control</a><ul>
<li><a class="reference internal" href="#module-tkp.quality.restoringbeam"><tt class="docutils literal"><span class="pre">tkp.quality.restoringbeam</span></tt></a></li>
<li><a class="reference internal" href="#module-tkp.quality.brightsource"><tt class="docutils literal"><span class="pre">tkp.quality.brightsource</span></tt></a></li>
<li><a class="reference internal" href="#module-tkp.quality.rms"><tt class="docutils literal"><span class="pre">tkp.quality.rms</span></tt></a></li>
<li><a class="reference internal" href="#module-tkp.quality.statistics"><tt class="docutils literal"><span class="pre">tkp.quality.statistics</span></tt></a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="../telescope.html"
                        title="previous chapter"><tt class="docutils literal"><span class="pre">tkp.telescope</span></tt> &#8211; Telescope specific functionality</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="../sourcefinder/index.html"
                        title="next chapter"><tt class="docutils literal"><span class="pre">tkp.sourcefinder</span></tt> &#8211; source finding and fitting</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../../../_sources/devref/tkp/quality/index.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="../sourcefinder/index.html" title="tkp.sourcefinder – source finding and fitting"
             >next</a> |</li>
        <li class="right" >
          <a href="../telescope.html" title="tkp.telescope – Telescope specific functionality"
             >previous</a> |</li>
        <li><a href="../../../index.html">LOFAR Transients Pipeline 2.1-pre documentation</a> &raquo;</li>
          <li><a href="../../index.html" >Developer&#8217;s Reference Guide</a> &raquo;</li>
          <li><a href="../index.html" >TKP Package API Reference</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2006—2014, LOFAR Transients Key Science Project.
    </div>
  </body>
</html>