<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Configuration System Overview &mdash; LOFAR Transients Pipeline 2.0-pre documentation</title>
    
    <link rel="stylesheet" href="../../_static/pydoctheme.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '2.0-pre',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="shortcut icon" href="../../_static/lofar.ico"/>
    <link rel="top" title="LOFAR Transients Pipeline 2.0-pre documentation" href="../../index.html" />
    <link rel="up" title="Pipeline Configuration" href="index.html" />
    <link rel="next" title="Project Configuration File" href="pipeline_cfg.html" />
    <link rel="prev" title="Pipeline Configuration" href="index.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="pipeline_cfg.html" title="Project Configuration File"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="index.html" title="Pipeline Configuration"
             accesskey="P">previous</a> |</li>
        <li><a href="../../index.html">LOFAR Transients Pipeline 2.0-pre documentation</a> &raquo;</li>
          <li><a href="../index.html" >User&#8217;s Reference Guide</a> &raquo;</li>
          <li><a href="index.html" accesskey="U">Pipeline Configuration</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="configuration-system-overview">
<span id="config-overview"></span><h1>Configuration System Overview<a class="headerlink" href="#configuration-system-overview" title="Permalink to this headline">¶</a></h1>
<div class="section" id="preamble">
<h2>Preamble<a class="headerlink" href="#preamble" title="Permalink to this headline">¶</a></h2>
<p>Users organize their TraP runs into <em>projects</em>, which contain high-level
descriptions of common TraP parameters. For example, a project specifies which
<a class="reference internal" href="../../getstart/concepts/database.html#database-intro"><em>database</em></a> to use. All the configuration and log files
relating to a particular project are stored in the same directory hierarchy.</p>
<p>Within a project, the user is able to start multiple pipeline runs, which are
referred to as <em>jobs</em>. For example, the user could use a single project to
repeatedly re-analyse a particular set of images with a range of different
sourcefinder settings, with each analysis constituting a particular job.
Alternatively, a project might be dedicated to a multi-epoch survey, with each
job corresponding to a different epoch. The fundamental point is that the
basic control structures such as the database and task distribution system
remain the same, but, within those limits, the user is free to organize their
work as they please.</p>
</div>
<div class="section" id="creating-a-project-directory">
<h2>Creating a Project Directory<a class="headerlink" href="#creating-a-project-directory" title="Permalink to this headline">¶</a></h2>
<p>Use the <a class="reference internal" href="../scripts.html#tkp-manage"><em>tkp-manage.py</em></a> to create a project directory:</p>
<div class="highlight-python"><div class="highlight"><pre>$ tkp-manage.py initproject &lt;projectname&gt;
</pre></div>
</div>
<p>This will create a skeleton directory structure named according to the project
name. Within that directory, there are four files:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">pipeline.cfg</span></tt></dt>
<dd>The overall pipeline configuration file. This configures the database which
will be used for this project, as well as specifying where and how to store
log files. <a class="reference internal" href="pipeline_cfg.html#pipeline-cfg"><em>See here</em></a> for a full description.</dd>
<dt><tt class="docutils literal"><span class="pre">celeryconfig.py</span></tt></dt>
<dd>Configuration of the <a class="reference internal" href="celeryconfig_py.html#celery-intro"><em>Celery</em></a> task distribution system.
<a class="reference internal" href="celeryconfig_py.html#celeryconfig-py"><em>See here</em></a> for a full description.</dd>
<dt><tt class="docutils literal"><span class="pre">manage.py</span></tt></dt>
<dd>An interface to the TKP management system. By default, invoking this is
functionally equivalent to invoking <tt class="docutils literal"><span class="pre">tkp-manage.py</span></tt>, but it may be
customized by an end user who requires some pipeline management facility
that is not provided by default.</dd>
<dt><tt class="docutils literal"><span class="pre">README.md</span></tt></dt>
<dd>A basic guide to the project directory text format.</dd>
</dl>
</div>
<div class="section" id="creating-a-job">
<span id="config-job"></span><h2>Creating a Job<a class="headerlink" href="#creating-a-job" title="Permalink to this headline">¶</a></h2>
<p>Use the <tt class="docutils literal"><span class="pre">manage.py</span></tt> script in your project directory to create a job:</p>
<div class="highlight-python"><div class="highlight"><pre>$ cd ./&lt;projectname&gt;
$ ./manage.py initjob &lt;jobname&gt;
</pre></div>
</div>
<p>This creates a job directory as a subdirectory of your project directory,
named according to the job name. Within that directory, there are three
files:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">images_to_process.py</span></tt></dt>
<dd><p class="first">This defines the list of images which will be processed by this job. It is
a Python file, which, when loaded, provide at module scope iterable named
<tt class="docutils literal"><span class="pre">images</span></tt> which contains the full path to each image to be processed.</p>
<p>In other words, the file could be as simple as:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">images</span> <span class="o">=</span> <span class="p">[</span><span class="s">&quot;/path/to/image1&quot;</span><span class="p">,</span> <span class="s">&quot;/path/to/image2&quot;</span><span class="p">,</span> <span class="o">...</span><span class="p">]</span>
</pre></div>
</div>
<p>Or could contain an elaborate set of globbing and pathname expansion as
required.</p>
<p class="last">The end user <em>will</em> need to customize to properly specify their
requirements.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">inject.cfg</span></tt></dt>
<dd>Configuration for the <a class="reference internal" href="../../tools/tkp-inject.html#tkp-inject"><em>metadata injection tool</em></a>.</dd>
<dt><tt class="docutils literal"><span class="pre">job_params.cfg</span></tt></dt>
<dd>Configuration for each stage of the pipeline run represented by this job.
This contains all the end-user tunable parameters which are relevant to
TraP operation. <a class="reference internal" href="job_params_cfg.html#job-params-cfg"><em>See here</em></a> for details.</dd>
</dl>
</div>
<div class="section" id="configuration-file-syntax">
<span id="configparser"></span><h2>Configuration file syntax<a class="headerlink" href="#configuration-file-syntax" title="Permalink to this headline">¶</a></h2>
<p>Several of the TraP&#8217;s configuration files &#8211; <a class="reference internal" href="pipeline_cfg.html#pipeline-cfg"><em>pipeline.cfg</em></a>, <a class="reference internal" href="../../tools/tkp-inject.html#tkp-inject"><em>inject.cfg</em></a>, <a class="reference internal" href="job_params_cfg.html#job-params-cfg"><em>job_params.cfg</em></a> &#8211; use the Python <a class="reference external" href="http://docs.python.org/library/configparser.html#module-ConfigParser" title="(in Python v2.7)"><tt class="xref py py-mod docutils literal"><span class="pre">ConfigParser</span></tt></a> file format. This is
defined by the Python standard library, and you should refer to its
documentation for a comprehensive reference. However, it is worth noting a few
salient points that may be of relevance to the TraP user.</p>
<p>These files are divided into named sections: the name comes at the top of the
section, surrounded by square brackets (<tt class="docutils literal"><span class="pre">[</span></tt> and <tt class="docutils literal"><span class="pre">]</span></tt>). Within a section,
a simple <tt class="docutils literal"><span class="pre">name</span> <span class="pre">=</span> <span class="pre">value</span></tt> syntax is used. <tt class="docutils literal"><span class="pre">;</span></tt> indicates a comment (<tt class="docutils literal"><span class="pre">#</span></tt> may
also be used for commenting, but only at the start of a line).</p>
<p>Variable substiution is performed using the notation <tt class="docutils literal"><span class="pre">%(name)s</span></tt>: this will
be expanded into the value of the variable <tt class="docutils literal"><span class="pre">name</span></tt> when the file is read.
Variables used in expansion are taken either from the same section of the
file, or from the special <tt class="docutils literal"><span class="pre">DEFAULT</span></tt> section. For example:</p>
<div class="highlight-python"><div class="highlight"><pre>[DEFAULT]
a = 1

[section_name]
b = 2
c = %(a)s
d = %(b)s
</pre></div>
</div>
<p>Would set the values of <tt class="docutils literal"><span class="pre">a</span></tt> and <tt class="docutils literal"><span class="pre">c</span></tt> to <tt class="docutils literal"><span class="pre">1</span></tt>, and <tt class="docutils literal"><span class="pre">b</span></tt> and <tt class="docutils literal"><span class="pre">d</span></tt> to
<tt class="docutils literal"><span class="pre">2</span></tt>.  In some cases, the TraP provides additional variables which may be
used in expansions in a particular file: these are noted in the documentation
for that file.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../index.html">
              <img class="logo" src="../../_static/lofar.png" alt="Logo"/>
            </a></p>
  <h3><a href="../../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Configuration System Overview</a><ul>
<li><a class="reference internal" href="#preamble">Preamble</a></li>
<li><a class="reference internal" href="#creating-a-project-directory">Creating a Project Directory</a></li>
<li><a class="reference internal" href="#creating-a-job">Creating a Job</a></li>
<li><a class="reference internal" href="#configuration-file-syntax">Configuration file syntax</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="index.html"
                        title="previous chapter">Pipeline Configuration</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="pipeline_cfg.html"
                        title="next chapter">Project Configuration File</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../../_sources/userref/config/overview.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="pipeline_cfg.html" title="Project Configuration File"
             >next</a> |</li>
        <li class="right" >
          <a href="index.html" title="Pipeline Configuration"
             >previous</a> |</li>
        <li><a href="../../index.html">LOFAR Transients Pipeline 2.0-pre documentation</a> &raquo;</li>
          <li><a href="../index.html" >User&#8217;s Reference Guide</a> &raquo;</li>
          <li><a href="index.html" >Pipeline Configuration</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2011—2014, LOFAR Transients Key Science Project.
    </div>
  </body>
</html>