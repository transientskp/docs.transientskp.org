<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>tkp.accessors – Image container classes &mdash; LOFAR Transients Pipeline 1.1 documentation</title>
    
    <link rel="stylesheet" href="../../_static/pydoctheme.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '1.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="shortcut icon" href="../../_static/lofar.ico"/>
    <link rel="top" title="LOFAR Transients Pipeline 1.1 documentation" href="../../index.html" />
    <link rel="up" title="Library &amp; API" href="index.html" />
    <link rel="next" title="Database package" href="database/index.html" />
    <link rel="prev" title="Trap logic flow overview" href="steps.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="database/index.html" title="Database package"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="steps.html" title="Trap logic flow overview"
             accesskey="P">previous</a> |</li>
        <li><a href="../../index.html">LOFAR Transients Pipeline 1.1 documentation</a> &raquo;</li>
          <li><a href="../index.html" >Developer&#8217;s Reference Guide</a> &raquo;</li>
          <li><a href="index.html" accesskey="U">Library &amp; API</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="tkp-accessors-image-container-classes">
<span id="accessors"></span><h1><a class="reference internal" href="#module-tkp.accessors" title="tkp.accessors: Accessor (image container) classes"><tt class="xref py py-mod docutils literal"><span class="pre">tkp.accessors</span></tt></a> &#8211; Image container classes<a class="headerlink" href="#tkp-accessors-image-container-classes" title="Permalink to this headline">¶</a></h1>
<p><em>This document last updated:</em> 2013-10-14.</p>
<div class="section" id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>The &#8220;accessors&#8221; system attempts to abstract away the physical image storage
format from the library logic. The higher-level data access routines should
not care whether the data is stored in a CASA table, or a FITS file, or in
some other format: they should be coded against a uniform interface provided
by the appropriate accessor.</p>
<p>An accessor should subclass
<tt class="xref py py-class docutils literal"><span class="pre">tkp.accessors.dataaccessor.DataAccessor</span></tt>, which is an abstract
base class (ie, it has <tt class="xref py py-class docutils literal"><span class="pre">abc.ABCMeta</span></tt> as its metaclass). Accessors
<em>must</em> conform to the DataAccessor interface. This means they must provide the
following attributes:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">beam</span></tt></dt>
<dd>Restoring beam. Tuple of three floats: semi-major axis (in pixels),
semi-minor axis (pixels) and position angle (radians).</dd>
<dt><tt class="docutils literal"><span class="pre">centre_ra</span></tt></dt>
<dd>Right ascension at the central point of the image, in decimal degrees.</dd>
<dt><tt class="docutils literal"><span class="pre">centre_dec</span></tt></dt>
<dd>Declination at the central point of the image, in decimal degrees.</dd>
<dt><tt class="docutils literal"><span class="pre">data</span></tt></dt>
<dd>NumPy array providing access to the (two-dimensional) pixel data.</dd>
<dt><tt class="docutils literal"><span class="pre">freq_bw</span></tt></dt>
<dd>The frequency bandwidth of the image, in Hz.</dd>
<dt><tt class="docutils literal"><span class="pre">freq_eff</span></tt></dt>
<dd>Effective frequency of the image in Hz. That is, the mean frequency of
all the visibility data which comprises this image.</dd>
<dt><tt class="docutils literal"><span class="pre">pixelsize</span></tt></dt>
<dd>(x, y) tuple representing the size of a pixel along each axis in units
of degrees.</dd>
<dt><tt class="docutils literal"><span class="pre">tau_time</span></tt></dt>
<dd>Total time on sky, in seconds.</dd>
<dt><tt class="docutils literal"><span class="pre">taustart_ts</span></tt></dt>
<dd>Timestamp of the first integration which constitutes part of this
image. MJD in seconds.</dd>
<dt><tt class="docutils literal"><span class="pre">url</span></tt></dt>
<dd>A (string) URL representing the location of the image at time of
processing.</dd>
<dt><tt class="docutils literal"><span class="pre">wcs</span></tt></dt>
<dd>An instance of <a class="reference internal" href="utility/coordinates.html#tkp.utility.coordinates.WCS" title="tkp.utility.coordinates.WCS"><tt class="xref py py-class docutils literal"><span class="pre">tkp.utility.coordinates.WCS</span></tt></a>, appropriately
initialized to handle coordinate conversions for this image.</dd>
</dl>
<p>An accessor which provides all of these properties is guaranteed to be usable
with all core Trap functionality.</p>
<p>In some cases, most notably <a class="reference internal" href="quality/index.html#quality"><em>quality control</em></a>, specialized (eg,
per-telescope) metadata may also be required. A further abstract base class
should be constructed to define the interface required. For example,
<tt class="xref py py-class docutils literal"><span class="pre">tkp.accessors.lofaraccessor.LofarAccessor</span></tt> defines the following
metadata which must be provided for LOFAR quality control:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">antenna_set</span></tt></dt>
<dd>Antenna set in use during observation. String; <tt class="docutils literal"><span class="pre">LBA_INNER</span></tt>, <tt class="docutils literal"><span class="pre">LBA_OUTER</span></tt>,
<tt class="docutils literal"><span class="pre">LBA_SPARSE</span></tt>, <tt class="docutils literal"><span class="pre">LBA</span></tt> or <tt class="docutils literal"><span class="pre">HBA</span></tt></dd>
<dt><tt class="docutils literal"><span class="pre">ncore</span></tt></dt>
<dd>Number of core stations in use during observations constituting this image.
Integer.</dd>
<dt><tt class="docutils literal"><span class="pre">nremote</span></tt></dt>
<dd>Number of remote stations in use during observations constituting this
image. Integer.</dd>
<dt><tt class="docutils literal"><span class="pre">nintl</span></tt></dt>
<dd>Number of international stations in use during observations constituting
this image. Integer.</dd>
<dt><tt class="docutils literal"><span class="pre">subbandwidth</span></tt></dt>
<dd>Width of a subband, in Hz.</dd>
<dt><tt class="docutils literal"><span class="pre">subbands</span></tt></dt>
<dd>Number of subbands.</dd>
</dl>
</div>
<div class="section" id="module-tkp.accessors">
<span id="api-documentation"></span><h2>API Documentation<a class="headerlink" href="#module-tkp.accessors" title="Permalink to this headline">¶</a></h2>
<p>Data accessors.</p>
<p>These can be used to populate ImageData objects based on some data source
(FITS file, array in memory... etc).</p>
<dl class="function">
<dt id="tkp.accessors.dbimage_from_accessor">
<tt class="descclassname">tkp.accessors.</tt><tt class="descname">dbimage_from_accessor</tt><big>(</big><em>dataset</em>, <em>dataccessor</em>, <em>extraction_radius</em><big>)</big><a class="reference internal" href="../../_modules/tkp/accessors.html#dbimage_from_accessor"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tkp.accessors.dbimage_from_accessor" title="Permalink to this definition">¶</a></dt>
<dd><p>Create an entry in the database image table from an image &#8216;accessor&#8217;</p>
<p>Args:</p>
<blockquote>
<div><ul class="simple">
<li>dataset (dataset.DataSet): DataSet for the image. Also
provides the database connection.</li>
<li>image (DataAccessor): FITS/AIPS/HDF5 image available through
an accessor</li>
</ul>
</div></blockquote>
<p>Returns:</p>
<blockquote>
<div>(dataset.Image): a dataset.Image instance.</div></blockquote>
</dd></dl>

<dl class="function">
<dt id="tkp.accessors.open">
<tt class="descclassname">tkp.accessors.</tt><tt class="descname">open</tt><big>(</big><em>path</em>, <em>*args</em>, <em>**kwargs</em><big>)</big><a class="reference internal" href="../../_modules/tkp/accessors.html#open"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tkp.accessors.open" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns an accessor object (if available) for the file or directory &#8216;path&#8217;.</p>
<p>We try all the possible accessors in order from most specific to least
specific. That is, if possible, we prefer an accessor providing
LofarAccessor to one providing DataAccessor, but we accept the latter if
that&#8217;s the only possible match.</p>
<p>Will raise an exception if something went wrong or no matching accessor
class is found.</p>
</dd></dl>

<dl class="function">
<dt id="tkp.accessors.sourcefinder_image_from_accessor">
<tt class="descclassname">tkp.accessors.</tt><tt class="descname">sourcefinder_image_from_accessor</tt><big>(</big><em>image</em>, <em>**args</em><big>)</big><a class="reference internal" href="../../_modules/tkp/accessors.html#sourcefinder_image_from_accessor"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tkp.accessors.sourcefinder_image_from_accessor" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a source finder ImageData object from an image &#8216;accessor&#8217;</p>
<p>Args:</p>
<blockquote>
<div><ul class="simple">
<li>image (DataAccessor): FITS/AIPS/HDF5 image available through
an accessor.</li>
</ul>
</div></blockquote>
<p>Returns:</p>
<blockquote>
<div>(sourcefinder.ImageData): a source finder image.</div></blockquote>
</dd></dl>

<dl class="function">
<dt id="tkp.accessors.writefits">
<tt class="descclassname">tkp.accessors.</tt><tt class="descname">writefits</tt><big>(</big><em>data</em>, <em>filename</em>, <em>header={}</em><big>)</big><a class="reference internal" href="../../_modules/tkp/accessors.html#writefits"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tkp.accessors.writefits" title="Permalink to this definition">¶</a></dt>
<dd><p>Dump a NumPy array to a FITS file.</p>
<p>Key/value pairs for the FITS header can be supplied in the optional
header argument as a dictionary.</p>
</dd></dl>

</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../index.html">
              <img class="logo" src="../../_static/lofar.png" alt="Logo"/>
            </a></p>
  <h3><a href="../../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#"><tt class="docutils literal"><span class="pre">tkp.accessors</span></tt> &#8211; Image container classes</a><ul>
<li><a class="reference internal" href="#introduction">Introduction</a></li>
<li><a class="reference internal" href="#module-tkp.accessors">API Documentation</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="steps.html"
                        title="previous chapter">Trap logic flow overview</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="database/index.html"
                        title="next chapter">Database package</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../../_sources/devref/tkp/accessors.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="database/index.html" title="Database package"
             >next</a> |</li>
        <li class="right" >
          <a href="steps.html" title="Trap logic flow overview"
             >previous</a> |</li>
        <li><a href="../../index.html">LOFAR Transients Pipeline 1.1 documentation</a> &raquo;</li>
          <li><a href="../index.html" >Developer&#8217;s Reference Guide</a> &raquo;</li>
          <li><a href="index.html" >Library &amp; API</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2013, LOFAR Transients Key Project.
    </div>
  </body>
</html>